<HTML><HEAD><TITLE>Manpage of GEAR</TITLE>
</HEAD><BODY>
<H1>GEAR</H1>
Section: User Commands (1)<BR>Updated: August 2008<BR><A HREF="#index">Index</A>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

gear - Get Every Archive from git package Repository
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<B>gear</B>

[<I>options</I>] <I>&lt;output-tarball-name&gt;</I>
<BR>

<B>gear</B>

[<I>options</I>] <I>--export-dir=&lt;dirname&gt;</I>
<BR>

<B>gear</B>

[<I>options</I>] <I>--command -- &lt;command&gt;</I>...
<BR>

<B>gear</B>

[<I>options</I>] <I>--hasher -- &lt;hsh-command&gt;</I>...
<BR>

<B>gear</B>

[<I>options</I>] <I>--rpmbuild -- &lt;rpmbuld-command&gt;</I>...
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

gear - extract archive from git package repository.
<A NAME="lbAE">&nbsp;</A>
<H2>OPTIONS</H2>

<DL COMPACT>
<DT><B>--no-compress</B><DD>
do not compress output archive;
<DT><B>--bzip2</B><DD>
compress output archive using bzip2;
<DT><B>--gzip</B><DD>
compress output archive using gzip;
<DT><B>--commit</B><DD>
make temporary commit prior to extract;
<DT><B>--command</B><DD>
execute arbitrary command afterwards;
<DT><B>--hasher</B><DD>
execute hsh-like command afterwards;
<DT><B>--rpmbuild</B><DD>
execute rpmbuild-like command afterwards;
<DT><B>--update-spec</B><DD>
if specfile was changed after executed rpmbuild
command, then update it in the git repository;
<DT><B>--export-dir</B>=<I>DIRNAME</I><DD>
write source files to specified directory;
<DT><B>--describe</B><DD>
describe package as &quot;%{NAME} %{VERSION} %{RELEASE}&quot;;
<DT><B>-r</B>, <B>--rules</B>=<I>FILENAME</I><DD>
override rules file name;
<DT><B>-t</B>, <B>--tree-ish</B>=<I>ID</I><DD>
COMMIT[:PATH] specifying the tree to process;
<DT><B>-q</B>, <B>--quiet</B><DD>
try to be more quiet;
<DT><B>-v</B>, <B>--verbose</B><DD>
print a message for each action;
<DT><B>-V</B>, <B>--version</B><DD>
print program version and exit;
<DT><B>-h</B>, <B>--help</B><DD>
show this text and exit.
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>USAGE</H2>

<B>gear</B> can perform several different operations, one of
which is selected by command line options.
<A NAME="lbAG">&nbsp;</A>
<H3>Create a tar archive with source files</H3>

When no options which specify another operation are
specified, <B>gear</B> requires a single non-option argument
<I>output-tarball-name</I>.  In this mode <B>gear</B> extracts
source files from the repository and packs them into a tar
archive with the specified name.  By default the archive is
compressed with <B>gzip</B>; this may be changed with the
<B>--no-compress</B> or <B>--bzip2</B> options.
<A NAME="lbAH">&nbsp;</A>
<H3>Extract source files to a directory</H3>

When the <B>--export-dir</B>=<I>dirname</I> option is
specified, <B>gear</B> does not accept any non-option
arguments.  In this mode <B>gear</B> extracts source files
from the repository and puts them into the specified
directory.
<A NAME="lbAI">&nbsp;</A>
<H3>Execute hsh-like command</H3>

When the <B>--hasher</B> option is specified, <B>gear</B>
requires one or more non-option arguments
<I>hsh-command</I>..., which specify the command to execute
and parameters for it.  In this mode <B>gear</B> extracts
source files from the repository, creates a temporary tar
archive with these files and invokes <I>hsh-command</I>,
appending the archive file name to its parameters.  When
<I>hsh-command</I> completes, <B>gear</B> removes the
temporary tar archive.
<A NAME="lbAJ">&nbsp;</A>
<H3>Execute rpmbuild-like command</H3>

When the <B>--rpmbuild</B> option is specified, <B>gear</B>
requires one or more non-option arguments
<I>rpmbuild-command</I>..., which specify the command to
execute and parameters for it.  In this mode <B>gear</B>
extracts source files from the repository to a temporary
directory and invokes <I>rpmbuild-command</I>, appending the
following parameters to it:
<DL COMPACT><DT><DD>
<P>

--define &quot;_specdir <I>$dir</I>&quot;
--define &quot;_sourcedir <I>$dir</I>&quot;
&quot;<I>$spec</I>&quot;
</DL>

<P>

where <I>$dir</I> is the name of the temporary directory, and
<I>$spec</I> is the full name of the extracted spec file.
When <I>rpmbuild-command</I> completes, <B>gear</B> optionally
copies the spec file from the temporary directory to the
working copy of the repository (if requested by the
<B>--update-spec</B> option), and then removes the
temporary source directory.
<A NAME="lbAK">&nbsp;</A>
<H3>Describe the package</H3>

When the <B>--describe</B> options is specified, <B>gear</B>
does not accept any non-option arguments.  In this mode
<B>gear</B> just prints the package name, version and release
strings found in the spec file, and does not proceed to
extract source files from the repository.
<A NAME="lbAL">&nbsp;</A>
<H2>ENVIRONMENT</H2>

<DL COMPACT>
<DT><B>GIT_DIR</B>

<DD>
If the
<B>GIT_DIR</B>

environment variable is set then it specifies a path to use instead of
the default for the base of the repository.
</DL>
<A NAME="lbAM">&nbsp;</A>
<H2>BUGS</H2>

<B>gear</B> does not get correct package name, version and
release from spec files which use RPM macros to define these
fields.
<P>

<B>gear --commit</B> loses the merge information saved by
<B>git-merge</B>.
<A NAME="lbAN">&nbsp;</A>
<H2>AUTHOR</H2>

Written by Dmitry V. Levin &lt;ldv@altlinux&gt;
<A NAME="lbAO">&nbsp;</A>
<H2>REPORTING BUGS</H2>

Report bugs to <A HREF="http://bugzilla.altlinux.org/">http://bugzilla.altlinux.org/</A>
<A NAME="lbAP">&nbsp;</A>
<H2>COPYRIGHT</H2>

Copyright &#169; 2006-2008  Dmitry V. Levin &lt;ldv@altlinux&gt;
<BR>

Copyright &#169; 2006  Sir Raorn &lt;raorn@altlinux&gt;
<BR>

Copyright &#169; 2006-2008  Alexey Gladkov &lt;legion@altlinux&gt;
<BR>

Copyright &#169; 2006-2007  Sergey Vlasov &lt;vsu@altlinux&gt;
<BR>

Copyright &#169; 2006  Fr. Br. George &lt;george@altlinux&gt;
<BR>

This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
<A NAME="lbAQ">&nbsp;</A>
<H2>SEE ALSO</H2>

<B><A HREF="gear-rules.5.html">gear-rules</A></B>(5),

<B><A HREF="gear-commit.1.html">gear-commit</A></B>(1),

<B><A HREF="gear-srpmimport.1.html">gear-srpmimport</A></B>(1),

<B><A HREF="gear-update-tag.1.html">gear-update-tag</A></B>(1),

<B><A HREF="gear-update.1.html">gear-update</A></B>(1),

<B>hsh</B>(1),

<B>git</B>(7),

<B>rpmbuild</B>(8).

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">OPTIONS</A><DD>
<DT><A HREF="#lbAF">USAGE</A><DD>
<DL>
<DT><A HREF="#lbAG">Create a tar archive with source files</A><DD>
<DT><A HREF="#lbAH">Extract source files to a directory</A><DD>
<DT><A HREF="#lbAI">Execute hsh-like command</A><DD>
<DT><A HREF="#lbAJ">Execute rpmbuild-like command</A><DD>
<DT><A HREF="#lbAK">Describe the package</A><DD>
</DL>
<DT><A HREF="#lbAL">ENVIRONMENT</A><DD>
<DT><A HREF="#lbAM">BUGS</A><DD>
<DT><A HREF="#lbAN">AUTHOR</A><DD>
<DT><A HREF="#lbAO">REPORTING BUGS</A><DD>
<DT><A HREF="#lbAP">COPYRIGHT</A><DD>
<DT><A HREF="#lbAQ">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
man2html
using the manual pages.<BR>
</BODY>
</HTML>
